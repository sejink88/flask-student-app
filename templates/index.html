<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>학생 점수 관리</title>
    <script>
        function updatePoints(studentId, action, value) {
            fetch(`/student/${studentId}/${action}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ points: value })
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
                location.reload();
            })
            .catch(error => console.error('Error:', error));
        }
    </script>
</head>
<body>
    <h1>학생 점수 관리</h1>
    <table border="1">
        <tr>
            <th>이름</th>
            <th>점수</th>
            {% if admin %}
            <th>관리</th>
            {% endif %}
        </tr>
        {% for student in students %}
        <tr>
            <td>{{ student.name }}</td>
            <td>{{ student.points }}</td>
            {% if admin %}
            <td>
                <button onclick="updatePoints({{ student.id }}, 'add', 1)">+1</button>
                <button onclick="updatePoints({{ student.id }}, 'subtract', 1)">-1</button>
                <button onclick="updatePoints({{ student.id }}, 'add', 5)">+5</button>
                <button onclick="updatePoints({{ student.id }}, 'subtract', 5)">-5</button>
            </td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>

    {% if admin %}
    <p><a href="/">학생 페이지로 이동</a></p>
    {% else %}
    <p><a href="/admin">관리자 페이지로 이동</a></p>
    {% endif %}
</body>
</html>
